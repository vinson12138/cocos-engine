
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/asset-manager/utilities.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2019 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
  worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
  not use Cocos Creator software for developing other software or tools that's
  used for developing games. You are not granted to publish, distribute,
  sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var dependUtil = require('./depend-util');

var _require = require('./helper'),
    isScene = _require.isScene,
    decodeUuid = _require.decodeUuid;

var _require2 = require('./shared'),
    assets = _require2.assets;

var _require3 = require('../platform/utils'),
    callInNextTick = _require3.callInNextTick;

var MissingObjectReporter = CC_EDITOR && Editor.require('app://editor/page/scene-utils/missing-object-reporter');

require('../assets/CCAsset');

var utils = {
  processOptions: function processOptions(options) {
    if (CC_EDITOR) return;
    var uuids = options.uuids;
    var paths = options.paths;
    var types = options.types;
    var bundles = options.deps;
    var realEntries = options.paths = Object.create(null);

    if (options.debug === false) {
      for (var i = 0, l = uuids.length; i < l; i++) {
        uuids[i] = decodeUuid(uuids[i]);
      }

      for (var id in paths) {
        var entry = paths[id];
        var type = entry[1];
        entry[1] = types[type];
      }
    } else {
      var out = Object.create(null);

      for (var _i = 0, _l = uuids.length; _i < _l; _i++) {
        var uuid = uuids[_i];
        uuids[_i] = out[uuid] = decodeUuid(uuid);
      }

      uuids = out;
    }

    for (var _id in paths) {
      var _entry = paths[_id];
      realEntries[uuids[_id]] = _entry;
    }

    var scenes = options.scenes;

    for (var name in scenes) {
      var _uuid = scenes[name];
      scenes[name] = uuids[_uuid];
    }

    var packs = options.packs;

    for (var packId in packs) {
      var packedIds = packs[packId];

      for (var j = 0; j < packedIds.length; ++j) {
        packedIds[j] = uuids[packedIds[j]];
      }
    }

    var versions = options.versions;

    if (versions) {
      for (var folder in versions) {
        var entries = versions[folder];

        for (var _i2 = 0; _i2 < entries.length; _i2 += 2) {
          var _uuid2 = entries[_i2];
          entries[_i2] = uuids[_uuid2] || _uuid2;
        }
      }
    }

    var redirect = options.redirect;

    if (redirect) {
      for (var _i3 = 0; _i3 < redirect.length; _i3 += 2) {
        redirect[_i3] = uuids[redirect[_i3]];
        redirect[_i3 + 1] = bundles[redirect[_i3 + 1]];
      }
    }
  },
  clear: function clear(task, clearRef) {
    for (var i = 0, l = task.input.length; i < l; i++) {
      var item = task.input[i];

      if (clearRef) {
        !item.isNative && item.content && item.content.decRef && item.content.decRef(false);
      }

      item.recycle();
    }

    task.input = null;
  },
  urlAppendTimestamp: function urlAppendTimestamp(url) {
    if (cc.assetManager.downloader.appendTimeStamp && typeof url === 'string') {
      if (/\?/.test(url)) return url + '&_t=' + (new Date() - 0);else return url + '?_t=' + (new Date() - 0);
    }

    return url;
  },
  retry: function retry(process, times, wait, onComplete, index) {
    index = index || 0;
    process(index, function (err, result) {
      index++;

      if (!err || index > times) {
        onComplete && onComplete(err, result);
      } else {
        setTimeout(function () {
          utils.retry(process, times, wait, onComplete, index);
        }, wait);
      }
    });
  },
  getDepends: function getDepends(uuid, data, exclude, depends, preload, asyncLoadAssets, config) {
    try {
      var info = dependUtil.parse(uuid, data);
      var includeNative = true;
      if (data instanceof cc.Asset && (!data.__nativeDepend__ || data._nativeAsset)) includeNative = false;

      if (!preload) {
        asyncLoadAssets = !CC_EDITOR && (!!data.asyncLoadAssets || asyncLoadAssets && !info.preventDeferredLoadDependents);

        for (var i = 0, l = info.deps.length; i < l; i++) {
          var dep = info.deps[i];

          if (!(dep in exclude)) {
            exclude[dep] = true;
            depends.push({
              uuid: dep,
              __asyncLoadAssets__: asyncLoadAssets,
              bundle: config && config.name
            });
          }
        }

        if (includeNative && !asyncLoadAssets && !info.preventPreloadNativeObject && info.nativeDep) {
          config && (info.nativeDep.bundle = config.name);
          depends.push(Object.assign({}, info.nativeDep));
        }
      } else {
        for (var _i4 = 0, _l2 = info.deps.length; _i4 < _l2; _i4++) {
          var _dep = info.deps[_i4];

          if (!(_dep in exclude)) {
            exclude[_dep] = true;
            depends.push({
              uuid: _dep,
              bundle: config && config.name
            });
          }
        }

        if (includeNative && info.nativeDep) {
          config && (info.nativeDep.bundle = config.name);
          depends.push(Object.assign({}, info.nativeDep));
        }
      }
    } catch (e) {
      cc.error(e.message, e.stack);
    }
  },
  cache: function cache(id, asset, cacheAsset) {
    if (!asset) return;

    var _isScene = isScene(asset);

    if (!_isScene && cacheAsset) {
      assets.add(id, asset);
    }

    if (_isScene) {
      if (CC_EDITOR && !asset.scene) {
        Editor.error('Sorry, the scene data of "%s" is corrupted!', asset._uuid);
      }
    }
  },
  setProperties: function setProperties(uuid, asset, assetsMap) {
    var missingAsset = false;
    var depends = asset.__depends__;

    if (depends) {
      var missingAssetReporter = null;

      for (var i = 0, l = depends.length; i < l; i++) {
        var depend = depends[i];
        var dependAsset = assetsMap[depend.uuid + '@import'];

        if (!dependAsset) {
          if (CC_EDITOR) {
            !missingAssetReporter && (missingAssetReporter = new MissingObjectReporter(asset));
            missingAssetReporter.stashByOwner(depend.owner, depend.prop, Editor.serialize.asAsset(depend.uuid));
          } else {
            cc.error('The asset ' + depend.uuid + ' is missing!');
          }

          missingAsset = true;
        } else {
          depend.owner[depend.prop] = dependAsset.addRef();
        }
      }

      missingAssetReporter && missingAssetReporter.reportByOwner();
      asset.__depends__ = undefined;
    }

    if (asset.__nativeDepend__) {
      if (!asset._nativeAsset) {
        if (assetsMap[uuid + '@native']) {
          asset._nativeAsset = assetsMap[uuid + '@native'];
        } else {
          missingAsset = true;

          if (CC_EDITOR) {
            console.error("the native asset of " + uuid + " is missing!");
          }
        }
      }

      asset.__nativeDepend__ = undefined;
    }

    return missingAsset;
  },
  gatherAsset: function gatherAsset(task) {
    var source = task.source;

    if (!task.options.__outputAsArray__ && source.length === 1) {
      task.output = source[0].content;
    } else {
      var output = task.output = [];

      for (var i = 0, l = source.length; i < l; i++) {
        output.push(source[i].content);
      }
    }
  },
  forEach: function forEach(array, process, onComplete) {
    var count = 0;
    var errs = [];
    if (array.length === 0) onComplete && onComplete(errs);

    for (var i = 0, l = array.length; i < l; i++) {
      process(array[i], function (err) {
        if (err) {
          errs.push(err);
        }

        count++;

        if (count === l) {
          onComplete && onComplete(errs);
        }
      });
    }
  },
  parseParameters: function parseParameters(options, onProgress, onComplete) {
    if (onComplete === undefined) {
      var isCallback = typeof options === 'function';

      if (onProgress) {
        onComplete = onProgress;

        if (!isCallback) {
          onProgress = null;
        }
      } else if (onProgress === undefined && isCallback) {
        onComplete = options;
        options = null;
        onProgress = null;
      }

      if (onProgress !== undefined && isCallback) {
        onProgress = options;
        options = null;
      }
    }

    options = options || Object.create(null);
    return {
      options: options,
      onProgress: onProgress,
      onComplete: onComplete
    };
  },
  parseLoadResArgs: function parseLoadResArgs(type, onProgress, onComplete) {
    if (onComplete === undefined) {
      var isValidType = cc.js.isChildClassOf(type, cc.Asset);

      if (onProgress) {
        onComplete = onProgress;

        if (isValidType) {
          onProgress = null;
        }
      } else if (onProgress === undefined && !isValidType) {
        onComplete = type;
        onProgress = null;
        type = null;
      }

      if (onProgress !== undefined && !isValidType) {
        onProgress = type;
        type = null;
      }
    }

    return {
      type: type,
      onProgress: onProgress,
      onComplete: onComplete
    };
  },
  checkCircleReference: function checkCircleReference(owner, uuid, map, checked) {
    if (!checked) {
      checked = Object.create(null);
    }

    var item = map[uuid];

    if (!item || checked[uuid]) {
      return false;
    }

    checked[uuid] = true;
    var result = false;
    var deps = dependUtil.getDeps(uuid);

    if (deps) {
      for (var i = 0, l = deps.length; i < l; i++) {
        var dep = deps[i];

        if (dep === owner || utils.checkCircleReference(owner, dep, map, checked)) {
          result = true;
          break;
        }
      }
    }

    return result;
  },
  asyncify: function asyncify(cb) {
    return function (p1, p2) {
      if (!cb) return;
      var refs = [];

      if (Array.isArray(p2)) {
        p2.forEach(function (x) {
          return x instanceof cc.Asset && refs.push(x.addRef());
        });
      } else {
        p2 instanceof cc.Asset && refs.push(p2.addRef());
      }

      callInNextTick(function () {
        refs.forEach(function (x) {
          return x.decRef(false);
        });
        cb(p1, p2);
      });
    };
  }
};
module.exports = utils;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXYvY29jb3MyZC9jb3JlL2Fzc2V0LW1hbmFnZXIvdXRpbGl0aWVzLmpzIl0sIm5hbWVzIjpbImRlcGVuZFV0aWwiLCJyZXF1aXJlIiwiaXNTY2VuZSIsImRlY29kZVV1aWQiLCJhc3NldHMiLCJjYWxsSW5OZXh0VGljayIsIk1pc3NpbmdPYmplY3RSZXBvcnRlciIsIkNDX0VESVRPUiIsIkVkaXRvciIsInV0aWxzIiwicHJvY2Vzc09wdGlvbnMiLCJvcHRpb25zIiwidXVpZHMiLCJwYXRocyIsInR5cGVzIiwiYnVuZGxlcyIsImRlcHMiLCJyZWFsRW50cmllcyIsIk9iamVjdCIsImNyZWF0ZSIsImRlYnVnIiwiaSIsImwiLCJsZW5ndGgiLCJpZCIsImVudHJ5IiwidHlwZSIsIm91dCIsInV1aWQiLCJzY2VuZXMiLCJuYW1lIiwicGFja3MiLCJwYWNrSWQiLCJwYWNrZWRJZHMiLCJqIiwidmVyc2lvbnMiLCJmb2xkZXIiLCJlbnRyaWVzIiwicmVkaXJlY3QiLCJjbGVhciIsInRhc2siLCJjbGVhclJlZiIsImlucHV0IiwiaXRlbSIsImlzTmF0aXZlIiwiY29udGVudCIsImRlY1JlZiIsInJlY3ljbGUiLCJ1cmxBcHBlbmRUaW1lc3RhbXAiLCJ1cmwiLCJjYyIsImFzc2V0TWFuYWdlciIsImRvd25sb2FkZXIiLCJhcHBlbmRUaW1lU3RhbXAiLCJ0ZXN0IiwiRGF0ZSIsInJldHJ5IiwicHJvY2VzcyIsInRpbWVzIiwid2FpdCIsIm9uQ29tcGxldGUiLCJpbmRleCIsImVyciIsInJlc3VsdCIsInNldFRpbWVvdXQiLCJnZXREZXBlbmRzIiwiZGF0YSIsImV4Y2x1ZGUiLCJkZXBlbmRzIiwicHJlbG9hZCIsImFzeW5jTG9hZEFzc2V0cyIsImNvbmZpZyIsImluZm8iLCJwYXJzZSIsImluY2x1ZGVOYXRpdmUiLCJBc3NldCIsIl9fbmF0aXZlRGVwZW5kX18iLCJfbmF0aXZlQXNzZXQiLCJwcmV2ZW50RGVmZXJyZWRMb2FkRGVwZW5kZW50cyIsImRlcCIsInB1c2giLCJfX2FzeW5jTG9hZEFzc2V0c19fIiwiYnVuZGxlIiwicHJldmVudFByZWxvYWROYXRpdmVPYmplY3QiLCJuYXRpdmVEZXAiLCJhc3NpZ24iLCJlIiwiZXJyb3IiLCJtZXNzYWdlIiwic3RhY2siLCJjYWNoZSIsImFzc2V0IiwiY2FjaGVBc3NldCIsIl9pc1NjZW5lIiwiYWRkIiwic2NlbmUiLCJfdXVpZCIsInNldFByb3BlcnRpZXMiLCJhc3NldHNNYXAiLCJtaXNzaW5nQXNzZXQiLCJfX2RlcGVuZHNfXyIsIm1pc3NpbmdBc3NldFJlcG9ydGVyIiwiZGVwZW5kIiwiZGVwZW5kQXNzZXQiLCJzdGFzaEJ5T3duZXIiLCJvd25lciIsInByb3AiLCJzZXJpYWxpemUiLCJhc0Fzc2V0IiwiYWRkUmVmIiwicmVwb3J0QnlPd25lciIsInVuZGVmaW5lZCIsImNvbnNvbGUiLCJnYXRoZXJBc3NldCIsInNvdXJjZSIsIl9fb3V0cHV0QXNBcnJheV9fIiwib3V0cHV0IiwiZm9yRWFjaCIsImFycmF5IiwiY291bnQiLCJlcnJzIiwicGFyc2VQYXJhbWV0ZXJzIiwib25Qcm9ncmVzcyIsImlzQ2FsbGJhY2siLCJwYXJzZUxvYWRSZXNBcmdzIiwiaXNWYWxpZFR5cGUiLCJqcyIsImlzQ2hpbGRDbGFzc09mIiwiY2hlY2tDaXJjbGVSZWZlcmVuY2UiLCJtYXAiLCJjaGVja2VkIiwiZ2V0RGVwcyIsImFzeW5jaWZ5IiwiY2IiLCJwMSIsInAyIiwicmVmcyIsIkFycmF5IiwiaXNBcnJheSIsIngiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBTUEsVUFBVSxHQUFHQyxPQUFPLENBQUMsZUFBRCxDQUExQjs7ZUFDZ0NBLE9BQU8sQ0FBQyxV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Qm1JLFFBQUFBLElBQUksQ0FBQ25CLE9BQUwsQ0FBYSxVQUFBc0IsQ0FBQztBQUFBLGlCQUFJQSxDQUFDLENBQUM3RixNQUFGLENBQVMsS0FBVCxDQUFKO0FBQUEsU0FBZDtBQUNBdUYsUUFBQUEsRUFBRSxDQUFDQyxFQUFELEVBQUtDLEVBQUwsQ0FBRjtBQUNILE9BSGEsQ0FBZDtBQUlILEtBWkQ7QUFhSDtBQTNUTyxDQUFaO0FBOFRBSyxNQUFNLENBQUNDLE9BQVAsR0FBaUJwSSxLQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gQ29weXJpZ2h0IChjKSAyMDE5IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxuXG4gaHR0cHM6Ly93d3cuY29jb3MuY29tL1xuXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZW5naW5lIHNvdXJjZSBjb2RlICh0aGUgXCJTb2Z0d2FyZVwiKSwgYSBsaW1pdGVkLFxuICB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcbiAgbm90IHVzZSBDb2NvcyBDcmVhdG9yIHNvZnR3YXJlIGZvciBkZXZlbG9waW5nIG90aGVyIHNvZnR3YXJlIG9yIHRvb2xzIHRoYXQnc1xuICB1c2VkIGZvciBkZXZlbG9waW5nIGdhbWVzLiBZb3UgYXJlIG5vdCBncmFudGVkIHRvIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsXG4gIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxuXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxuXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiBUSEUgU09GVFdBUkUuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbmNvbnN0IGRlcGVuZFV0aWwgPSByZXF1aXJlKCcuL2RlcGVuZC11dGlsJyk7XG5jb25zdCB7IGlzU2NlbmUsIGRlY29kZVV1aWQgfSA9IHJlcXVpcmUoJy4vaGVscGVyJyk7XG5jb25zdCB7IGFzc2V0cyB9ID0gcmVxdWlyZSgnLi9zaGFyZWQnKTtcbmNvbnN0IHsgY2FsbEluTmV4dFRpY2sgfSA9IHJlcXVpcmUoJy4uL3BsYXRmb3JtL3V0aWxzJyk7XG5jb25zdCBNaXNzaW5nT2JqZWN0UmVwb3J0ZXIgPSBDQ19FRElUT1IgJiYgRWRpdG9yLnJlcXVpcmUoJ2FwcDovL2VkaXRvci9wYWdlL3NjZW5lLXV0aWxzL21pc3Npbmctb2JqZWN0LXJlcG9ydGVyJyk7XG5yZXF1aXJlKCcuLi9hc3NldHMvQ0NBc3NldCcpO1xuXG52YXIgdXRpbHMgPSB7XG5cbiAgICBwcm9jZXNzT3B0aW9ucyAob3B0aW9ucykge1xuICAgICAgICBpZiAoQ0NfRURJVE9SKSByZXR1cm47XG4gICAgICAgIHZhciB1dWlkcyA9IG9wdGlvbnMudXVpZHM7XG4gICAgICAgIHZhciBwYXRocyA9IG9wdGlvbnMucGF0aHM7XG4gICAgICAgIHZhciB0eXBlcyA9IG9wdGlvbnMudHlwZXM7XG4gICAgICAgIHZhciBidW5kbGVzID0gb3B0aW9ucy5kZXBzO1xuICAgICAgICB2YXIgcmVhbEVudHJpZXMgPSBvcHRpb25zLnBhdGhzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgICAgICBpZiAob3B0aW9ucy5kZWJ1ZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdXVpZHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdXVpZHNbaV0gPSBkZWNvZGVVdWlkKHV1aWRzW2ldKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgaWQgaW4gcGF0aHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZW50cnkgPSBwYXRoc1tpZF07XG4gICAgICAgICAgICAgICAgbGV0IHR5cGUgPSBlbnRyeVsxXTtcbiAgICAgICAgICAgICAgICBlbnRyeVsxXSA9IHR5cGVzW3R5cGVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIG91dCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHV1aWRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCB1dWlkID0gdXVpZHNbaV07XG4gICAgICAgICAgICAgICAgdXVpZHNbaV0gPSBvdXRbdXVpZF0gPSBkZWNvZGVVdWlkKHV1aWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXVpZHMgPSBvdXQ7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpZCBpbiBwYXRocykge1xuICAgICAgICAgICAgbGV0IGVudHJ5ID0gcGF0aHNbaWRdO1xuICAgICAgICAgICAgcmVhbEVudHJpZXNbdXVpZHNbaWRdXSA9IGVudHJ5O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNjZW5lcyA9IG9wdGlvbnMuc2NlbmVzO1xuICAgICAgICBmb3IgKGxldCBuYW1lIGluIHNjZW5lcykge1xuICAgICAgICAgICAgbGV0IHV1aWQgPSBzY2VuZXNbbmFtZV07XG4gICAgICAgICAgICBzY2VuZXNbbmFtZV0gPSB1dWlkc1t1dWlkXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYWNrcyA9IG9wdGlvbnMucGFja3M7XG4gICAgICAgIGZvciAobGV0IHBhY2tJZCBpbiBwYWNrcykge1xuICAgICAgICAgICAgbGV0IHBhY2tlZElkcyA9IHBhY2tzW3BhY2tJZF07XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBhY2tlZElkcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgIHBhY2tlZElkc1tqXSA9IHV1aWRzW3BhY2tlZElkc1tqXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdmVyc2lvbnMgPSBvcHRpb25zLnZlcnNpb25zO1xuICAgICAgICBpZiAodmVyc2lvbnMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGZvbGRlciBpbiB2ZXJzaW9ucykge1xuICAgICAgICAgICAgICAgIHZhciBlbnRyaWVzID0gdmVyc2lvbnNbZm9sZGVyXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHV1aWQgPSBlbnRyaWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICBlbnRyaWVzW2ldID0gdXVpZHNbdXVpZF0gfHwgdXVpZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVkaXJlY3QgPSBvcHRpb25zLnJlZGlyZWN0O1xuICAgICAgICBpZiAocmVkaXJlY3QpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVkaXJlY3QubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFtpXSA9IHV1aWRzW3JlZGlyZWN0W2ldXTtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFtpICsgMV0gPSBidW5kbGVzW3JlZGlyZWN0W2kgKyAxXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH0sXG5cbiAgICBjbGVhciAodGFzaywgY2xlYXJSZWYpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0YXNrLmlucHV0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0YXNrLmlucHV0W2ldO1xuICAgICAgICAgICAgaWYgKGNsZWFyUmVmKSB7XG4gICAgICAgICAgICAgICAgIWl0ZW0uaXNOYXRpdmUgJiYgaXRlbS5jb250ZW50ICYmIGl0ZW0uY29udGVudC5kZWNSZWYgJiYgaXRlbS5jb250ZW50LmRlY1JlZihmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtLnJlY3ljbGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0YXNrLmlucHV0ID0gbnVsbDtcbiAgICB9LFxuXG4gICAgdXJsQXBwZW5kVGltZXN0YW1wICh1cmwpIHtcbiAgICAgICAgaWYgKGNjLmFzc2V0TWFuYWdlci5kb3dubG9hZGVyLmFwcGVuZFRpbWVTdGFtcCAmJiB0eXBlb2YgdXJsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKC9cXD8vLnRlc3QodXJsKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsICsgJyZfdD0nICsgKG5ldyBEYXRlKCkgLSAwKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsICsgJz9fdD0nICsgKG5ldyBEYXRlKCkgLSAwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH0sXG5cbiAgICByZXRyeSAocHJvY2VzcywgdGltZXMsIHdhaXQsIG9uQ29tcGxldGUsIGluZGV4KSB7XG4gICAgICAgIGluZGV4ID0gaW5kZXggfHwgMDtcbiAgICAgICAgcHJvY2VzcyhpbmRleCwgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgaWYgKCFlcnIgfHwgaW5kZXggPiB0aW1lcykge1xuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShlcnIsIHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdXRpbHMucmV0cnkocHJvY2VzcywgdGltZXMsIHdhaXQsIG9uQ29tcGxldGUsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9LCB3YWl0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldERlcGVuZHMgKHV1aWQsIGRhdGEsIGV4Y2x1ZGUsIGRlcGVuZHMsIHByZWxvYWQsIGFzeW5jTG9hZEFzc2V0cywgY29uZmlnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IGRlcGVuZFV0aWwucGFyc2UodXVpZCwgZGF0YSk7XG4gICAgICAgICAgICB2YXIgaW5jbHVkZU5hdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIGNjLkFzc2V0ICYmICghZGF0YS5fX25hdGl2ZURlcGVuZF9fIHx8IGRhdGEuX25hdGl2ZUFzc2V0KSkgaW5jbHVkZU5hdGl2ZSA9IGZhbHNlOyBcbiAgICAgICAgICAgIGlmICghcHJlbG9hZCkge1xuICAgICAgICAgICAgICAgIGFzeW5jTG9hZEFzc2V0cyA9ICFDQ19FRElUT1IgJiYgKCEhZGF0YS5hc3luY0xvYWRBc3NldHMgfHwgKGFzeW5jTG9hZEFzc2V0cyAmJiAhaW5mby5wcmV2ZW50RGVmZXJyZWRMb2FkRGVwZW5kZW50cykpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gaW5mby5kZXBzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGVwID0gaW5mby5kZXBzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShkZXAgaW4gZXhjbHVkZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVbZGVwXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBlbmRzLnB1c2goe3V1aWQ6IGRlcCwgX19hc3luY0xvYWRBc3NldHNfXzogYXN5bmNMb2FkQXNzZXRzLCBidW5kbGU6IGNvbmZpZyAmJiBjb25maWcubmFtZX0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGluY2x1ZGVOYXRpdmUgJiYgIWFzeW5jTG9hZEFzc2V0cyAmJiAhaW5mby5wcmV2ZW50UHJlbG9hZE5hdGl2ZU9iamVjdCAmJiBpbmZvLm5hdGl2ZURlcCkge1xuICAgICAgICAgICAgICAgICAgICBjb25maWcgJiYgKGluZm8ubmF0aXZlRGVwLmJ1bmRsZSA9IGNvbmZpZy5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgZGVwZW5kcy5wdXNoKE9iamVjdC5hc3NpZ24oe30sIGluZm8ubmF0aXZlRGVwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGluZm8uZGVwcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlcCA9IGluZm8uZGVwc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZGVwIGluIGV4Y2x1ZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGNsdWRlW2RlcF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVwZW5kcy5wdXNoKHt1dWlkOiBkZXAsIGJ1bmRsZTogY29uZmlnICYmIGNvbmZpZy5uYW1lfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluY2x1ZGVOYXRpdmUgJiYgaW5mby5uYXRpdmVEZXApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnICYmIChpbmZvLm5hdGl2ZURlcC5idW5kbGUgPSBjb25maWcubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGRlcGVuZHMucHVzaChPYmplY3QuYXNzaWduKHt9LCBpbmZvLm5hdGl2ZURlcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY2MuZXJyb3IoZS5tZXNzYWdlLCBlLnN0YWNrKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgY2FjaGUgKGlkLCBhc3NldCwgY2FjaGVBc3NldCkge1xuICAgICAgICBpZiAoIWFzc2V0KSByZXR1cm47XG4gICAgICAgIHZhciBfaXNTY2VuZSA9IGlzU2NlbmUoYXNzZXQpO1xuICAgICAgICBpZiAoIV9pc1NjZW5lICYmIGNhY2hlQXNzZXQpIHtcbiAgICAgICAgICAgIGFzc2V0cy5hZGQoaWQsIGFzc2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2lzU2NlbmUpIHtcbiAgICAgICAgICAgIGlmIChDQ19FRElUT1IgJiYgIWFzc2V0LnNjZW5lKSB7XG4gICAgICAgICAgICAgICAgRWRpdG9yLmVycm9yKCdTb3JyeSwgdGhlIHNjZW5lIGRhdGEgb2YgXCIlc1wiIGlzIGNvcnJ1cHRlZCEnLCBhc3NldC5fdXVpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0UHJvcGVydGllcyAodXVpZCwgYXNzZXQsIGFzc2V0c01hcCkge1xuXG4gICAgICAgIHZhciBtaXNzaW5nQXNzZXQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGRlcGVuZHMgPSBhc3NldC5fX2RlcGVuZHNfXztcbiAgICAgICAgaWYgKGRlcGVuZHMpIHtcbiAgICAgICAgICAgIHZhciBtaXNzaW5nQXNzZXRSZXBvcnRlciA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGRlcGVuZHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlcGVuZCA9IGRlcGVuZHNbaV07XG4gICAgICAgICAgICAgICAgdmFyIGRlcGVuZEFzc2V0ID0gYXNzZXRzTWFwW2RlcGVuZC51dWlkICsgJ0BpbXBvcnQnXTtcbiAgICAgICAgICAgICAgICBpZiAoIWRlcGVuZEFzc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChDQ19FRElUT1IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICFtaXNzaW5nQXNzZXRSZXBvcnRlciAmJiAobWlzc2luZ0Fzc2V0UmVwb3J0ZXIgPSBuZXcgTWlzc2luZ09iamVjdFJlcG9ydGVyKGFzc2V0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaXNzaW5nQXNzZXRSZXBvcnRlci5zdGFzaEJ5T3duZXIoZGVwZW5kLm93bmVyLCBkZXBlbmQucHJvcCwgRWRpdG9yLnNlcmlhbGl6ZS5hc0Fzc2V0KGRlcGVuZC51dWlkKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5lcnJvcignVGhlIGFzc2V0ICcgKyBkZXBlbmQudXVpZCArICcgaXMgbWlzc2luZyEnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtaXNzaW5nQXNzZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwZW5kLm93bmVyW2RlcGVuZC5wcm9wXSA9IGRlcGVuZEFzc2V0LmFkZFJlZigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWlzc2luZ0Fzc2V0UmVwb3J0ZXIgJiYgbWlzc2luZ0Fzc2V0UmVwb3J0ZXIucmVwb3J0QnlPd25lcigpO1xuICAgICAgICAgICAgYXNzZXQuX19kZXBlbmRzX18gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChhc3NldC5fX25hdGl2ZURlcGVuZF9fKSB7XG4gICAgICAgICAgICBpZiAoIWFzc2V0Ll9uYXRpdmVBc3NldCkge1xuICAgICAgICAgICAgICAgIGlmIChhc3NldHNNYXBbdXVpZCArICdAbmF0aXZlJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXQuX25hdGl2ZUFzc2V0ID0gYXNzZXRzTWFwW3V1aWQgKyAnQG5hdGl2ZSddO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWlzc2luZ0Fzc2V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKENDX0VESVRPUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgdGhlIG5hdGl2ZSBhc3NldCBvZiAke3V1aWR9IGlzIG1pc3NpbmchYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhc3NldC5fX25hdGl2ZURlcGVuZF9fID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaXNzaW5nQXNzZXQ7XG4gICAgfSxcblxuICAgIGdhdGhlckFzc2V0ICh0YXNrKSB7XG4gICAgICAgIGxldCBzb3VyY2UgPSB0YXNrLnNvdXJjZTtcbiAgICAgICAgaWYgKCF0YXNrLm9wdGlvbnMuX19vdXRwdXRBc0FycmF5X18gJiYgc291cmNlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgdGFzay5vdXRwdXQgPSBzb3VyY2VbMF0uY29udGVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBvdXRwdXQgPSB0YXNrLm91dHB1dCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzb3VyY2UubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goc291cmNlW2ldLmNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGZvckVhY2ggKGFycmF5LCBwcm9jZXNzLCBvbkNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgIHZhciBlcnJzID0gW107XG4gICAgICAgIGlmIChhcnJheS5sZW5ndGggPT09IDApIG9uQ29tcGxldGUgJiYgb25Db21wbGV0ZShlcnJzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHByb2Nlc3MoYXJyYXlbaV0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycnMucHVzaChlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb3VudCArKztcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPT09IGwpIHtcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZSAmJiBvbkNvbXBsZXRlKGVycnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHBhcnNlUGFyYW1ldGVycyAob3B0aW9ucywgb25Qcm9ncmVzcywgb25Db21wbGV0ZSkge1xuICAgICAgICBpZiAob25Db21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgaXNDYWxsYmFjayA9IHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nO1xuICAgICAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlID0gb25Qcm9ncmVzcztcbiAgICAgICAgICAgICAgICBpZiAoIWlzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgb25Qcm9ncmVzcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob25Qcm9ncmVzcyA9PT0gdW5kZWZpbmVkICYmIGlzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlID0gb3B0aW9ucztcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gbnVsbDtcbiAgICAgICAgICAgICAgICBvblByb2dyZXNzID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvblByb2dyZXNzICE9PSB1bmRlZmluZWQgJiYgaXNDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3MgPSBvcHRpb25zO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHJldHVybiB7IG9wdGlvbnMsIG9uUHJvZ3Jlc3MsIG9uQ29tcGxldGUgfTtcbiAgICB9LFxuXG4gICAgcGFyc2VMb2FkUmVzQXJncyAodHlwZSwgb25Qcm9ncmVzcywgb25Db21wbGV0ZSkge1xuICAgICAgICBpZiAob25Db21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgaXNWYWxpZFR5cGUgPSBjYy5qcy5pc0NoaWxkQ2xhc3NPZih0eXBlLCBjYy5Bc3NldCk7XG4gICAgICAgICAgICBpZiAob25Qcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUgPSBvblByb2dyZXNzO1xuICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBvblByb2dyZXNzID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvblByb2dyZXNzID09PSB1bmRlZmluZWQgJiYgIWlzVmFsaWRUeXBlKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSA9IHR5cGU7XG4gICAgICAgICAgICAgICAgb25Qcm9ncmVzcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgdHlwZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob25Qcm9ncmVzcyAhPT0gdW5kZWZpbmVkICYmICFpc1ZhbGlkVHlwZSkge1xuICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3MgPSB0eXBlO1xuICAgICAgICAgICAgICAgIHR5cGUgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHR5cGUsIG9uUHJvZ3Jlc3MsIG9uQ29tcGxldGUgfTtcbiAgICB9LFxuXG4gICAgY2hlY2tDaXJjbGVSZWZlcmVuY2UgKG93bmVyLCB1dWlkLCBtYXAsIGNoZWNrZWQpIHtcbiAgICAgICAgaWYgKCFjaGVja2VkKSB7IFxuICAgICAgICAgICAgY2hlY2tlZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGl0ZW0gPSBtYXBbdXVpZF07XG4gICAgICAgIGlmICghaXRlbSB8fCBjaGVja2VkW3V1aWRdKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2hlY2tlZFt1dWlkXSA9IHRydWU7XG4gICAgICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGRlcHMgPSBkZXBlbmRVdGlsLmdldERlcHModXVpZCk7XG4gICAgICAgIGlmIChkZXBzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGRlcHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlcCA9IGRlcHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGRlcCA9PT0gb3duZXIgfHwgdXRpbHMuY2hlY2tDaXJjbGVSZWZlcmVuY2Uob3duZXIsIGRlcCwgbWFwLCBjaGVja2VkKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgYXN5bmNpZnkgKGNiKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocDEsIHAyKSB7XG4gICAgICAgICAgICBpZiAoIWNiKSByZXR1cm47XG4gICAgICAgICAgICBsZXQgcmVmcyA9IFtdO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocDIpKSB7XG4gICAgICAgICAgICAgICAgcDIuZm9yRWFjaCh4ID0+IHggaW5zdGFuY2VvZiBjYy5Bc3NldCAmJiByZWZzLnB1c2goeC5hZGRSZWYoKSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwMiBpbnN0YW5jZW9mIGNjLkFzc2V0ICYmIHJlZnMucHVzaChwMi5hZGRSZWYoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsSW5OZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVmcy5mb3JFYWNoKHggPT4geC5kZWNSZWYoZmFsc2UpKTtcbiAgICAgICAgICAgICAgICBjYihwMSwgcDIpO1xuICAgICAgICAgICAgfSk7IFxuICAgICAgICB9XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB1dGlsczsiXSwic291cmNlUm9vdCI6Ii8ifQ==